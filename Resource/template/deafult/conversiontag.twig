<script>
    ga('ecommerce:addTransaction', {
        id: '{{ Order.orderNo }}', // Transaction ID - this is normally generated by your system.
        affiliation: '{{ BaseInfo.shop_name }}', // Affiliation or store name
        revenue: '{{ Order.payment_total|price }}', // Grand Total
        shipping: '{{ Order.delivery_fee_total|price }}'}); // Shipping cost

    {% for OrderItem in Order.MergedProductOrderItems %}
    ga('ecommerce:addItem', {
        id: '{{ Order.orderNo }}', // Transaction ID.
        sku: '{{ OrderItem.product_code }}', // SKU/code.
        name: '{{ OrderItem.product_name }}  {{ OrderItem.classcategory_name1 }}  {{ OrderItem.classcategory_name2 }}', // Product name.
        price: '{{ OrderItem.price_inc_tax|price }}', // Unit price.
        quantity: '{{ OrderItem.quantity|number_format }}'}); // Quantity.
    {% endfor %}
    ga('ecommerce:send');
</script>